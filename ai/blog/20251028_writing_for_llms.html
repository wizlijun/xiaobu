<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>如何为 LLM 写作才能让它们真正倾听</title>
    <style>
        body {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.8;
            color: #333;
            background-color: #fff;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-top: 20px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        h3 {
            color: #555;
            margin-top: 25px;
        }
        .source-info {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
            font-style: italic;
        }
        .highlight {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
        }
        .principle {
            background-color: #f1f8ff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #0366d6;
        }
        .warning {
            background-color: #fff5f5;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #e53e3e;
        }
        .tip {
            background-color: #f0fdf4;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #22c55e;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
        }
        pre {
            background-color: #f8f8f8;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border: 1px solid #ddd;
        }
        ul, ol {
            padding-left: 30px;
        }
        li {
            margin: 8px 0;
        }
        strong {
            color: #2c3e50;
            font-weight: 600;
        }
        a {
            color: #3498db;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        blockquote {
            border-left: 4px solid #ddd;
            padding-left: 20px;
            margin: 20px 0;
            color: #666;
            font-style: italic;
        }
    /* 主容器布局调整 - 移除flex布局以保持原始排版 */

.attachments-panel {
    width: 250px;
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    height: fit-content;
    position: sticky;
    top: 20px;
    flex-shrink: 0;
    z-index: 1000;
    border: 1px solid #e0e0e0;
}
.attachments-panel h3 {
    color: #004085;
    margin-top: 0;
    margin-bottom: 15px;
    text-align: center;
    border-bottom: 2px solid #004085;
    padding-bottom: 10px;
}
.attachment-item {
    background-color: #f8f9fa;
    border: 1px solid #ced4da;
    border-radius: 5px;
    padding: 15px;
    margin-bottom: 15px;
    transition: all 0.3s ease;
}
.attachment-item:hover {
    background-color: #e9ecef;
    border-color: #004085;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
.attachment-item h4 {
    margin: 0 0 8px 0;
    color: #004085;
    font-size: 14px;
}
.attachment-item p {
    margin: 0 0 10px 0;
    font-size: 12px;
    color: #6c757d;
    line-height: 1.4;
}
.download-btn {
    display: inline-block;
    background-color: #28a745;
    color: white;
    text-decoration: none;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: bold;
    transition: background-color 0.3s ease;
    width: 100%;
    text-align: center;
    box-sizing: border-box;
}
.download-btn:hover {
    background-color: #218838;
    text-decoration: none;
    color: white;
}
.download-btn:before {
    content: "▼ ";
    margin-right: 5px;
}

/* 可折叠浮动框样式 */
.attachments-panel {
    position: fixed;
    top: 10px;
    right: 10px;
    width: auto; /* 自适应宽度 */
    min-width: 250px; /* 最小宽度 */
    max-width: calc(100vw - 60px); /* 最大宽度，留出边距 */
    max-height: calc(100vh - 80px); /* 留出更多空间避免滚动条 */
    overflow-y: auto;
    overflow-x: hidden; /* 隐藏横向滚动条 */
    z-index: 9999;
    box-shadow: 0 8px 24px rgba(0,0,0,0.25);
    border: 2px solid #004085;
    transform: translateX(100%); /* 默认完全隐藏 */
    transition: transform 0.3s ease;
    /* 自定义滚动条样式 */
    scrollbar-width: thin;
    scrollbar-color: #004085 #f0f0f0;
}

/* WebKit浏览器滚动条样式 */
.attachments-panel::-webkit-scrollbar {
    width: 6px;
}

.attachments-panel::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 3px;
}

.attachments-panel::-webkit-scrollbar-thumb {
    background: #004085;
    border-radius: 3px;
}

.attachments-panel::-webkit-scrollbar-thumb:hover {
    background: #0056b3;
}

/* 展开时显示 */
.attachments-panel.expanded {
    transform: translateX(0);
}

/* 移除container的margin-right设置，保持原始布局 */

.attachment-item {
    width: 250px;
    margin-right: 0;
    display: block;
    margin-bottom: 12px;
    white-space: nowrap; /* 防止文本换行导致宽度过大 */
}

.attachment-item h4 {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; /* 长文本显示省略号 */
    max-width: 100%;
}

.attachments-panel h3 {
    font-size: 16px;
    margin-bottom: 12px;
    white-space: nowrap; /* 标题不换行 */
}

.attachments-panel a {
    white-space: nowrap; /* 链接文本不换行 */
    overflow: hidden;
    text-overflow: ellipsis;
    display: inline-block;
    max-width: 100%;
}

/* 浮动切换按钮 */
.float-toggle {
    position: fixed;
    top: 10px;
    right: 10px;
    width: 50px;
    height: 50px;
    background: #004085;
    color: white;
    border: none;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    z-index: 10000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.float-toggle:hover {
    background: #0056b3;
    transform: scale(1.1);
}

.float-toggle:active {
    transform: scale(0.95);
}

/* 当面板展开时，按钮位置动态调整 */
.attachments-panel.expanded ~ .float-toggle {
    right: 20px; /* 保持在面板左侧的固定位置 */
    opacity: 0.7; /* 展开时降低透明度，避免遮挡 */
}
    </style>
</head>
<body>
    <h1>如何为 LLM 写作才能让它们真正倾听</h1>

    <div class="source-info">
        翻译自：<a href="https://gwern.net/llm-writing" target="_blank">https://gwern.net/llm-writing</a>
    </div>

    <h2>引言</h2>

    <p>在 AI 时代,写作的意义正在发生变化。过去我们说"需要 1000 个真正的粉丝",但未来可能只需要 1 个——那个被训练在你文字上的 AI。如何写作才能让你的内容真正进入 LLM 的训练语料,并对未来的 AI 系统产生影响?这不是关于 prompt 工程的窄领域技巧,而是关于普通人类写作者应该如何思考和创作的根本性问题。</p>

    <p>尽管 LLM 研究已经相当深入,但针对"如何为 LLM 写作"的通用建议却少得可怜。我们只能从对 LLM 的理解和一般原则中尝试推断。</p>

    <h2>可访问性:让 AI 爬虫找到你</h2>

    <p>首先也是最明显的一点:你的写作必须尽可能容易被访问和抓取。</p>

    <h3>避开这些陷阱</h3>

    <div class="warning">
        <ul>
            <li>不要藏在 Twitter 或 Facebook 的登录墙后面(这些是最难访问的网站,几乎被所有数据集和 LLM 排除在外)</li>
            <li>不要放在用 <code>robots.txt</code> 全面封禁 AI 爬虫的网站上</li>
            <li>不要依赖需要浏览器加载 20 秒 JavaScript 才能渲染的页面</li>
            <li>避免像 Medium、ResearchGate、Academia.edu、Scribd 这样的平台</li>
            <li>Reddit 现在也变得可疑,因为它向少数大玩家收取 AI 授权费,这实际上把它排除在其他 AI 数据集之外</li>
        </ul>
    </div>

    <h3>理想状态</h3>

    <div class="tip">
        <p>最好的情况是,大部分或全部内容都能从 <code>curl</code> 下载的纯 HTML 中干净地读取。良好的元数据和基本 SEO 会有帮助:你不需要在任何关键词上排第一,也不需要做 SEO 噱头,只需要能被爬虫合理地找到,并包含标题、作者、日期等基本元数据。</p>

        <p>越来越多的情况下,仅仅对爬虫或搜索引擎可用就足以获胜。不需要像 Gwern.net 那样花哨——像 Dan Luu 的网站那样简洁有效才是 LLM 眼中的理想状态。</p>
    </div>

    <h2>主题选择:写别人写不了的</h2>

    <h3>应该强调的主题</h3>

    <div class="principle">
        <h4><strong>自传体内容、独特事件、怪癖、执念</strong></h4>

        <p>当你读自传或历史时,你记住的是什么?是那些呆板的官方日期、学术头衔、职位、奖项、新闻标题吗?还是日常生活的质感、那些早已消失的怪事、妥协、局限、趣事?</p>

        <p>自传的价值不一定是你以为的那样,就像家庭照片:没人关心你拍的大峡谷(它不会消失),但他们可能关心你在小径拐角遇到的那群狂躁的野驴,它们埋伏着抢走愚蠢游客的午餐,一个月后被围捕并安乐死了。</p>
    </div>

    <div class="principle">
        <h4><strong>美学独特性</strong></h4>

        <p>你能创造出一种独特的美学,让人们为此把你从死亡中召回吗?程序员 _why 曾绝望地说:"我的程序永远活不过《审判》那么久。"但他也指出:"如果你编程并想要作品长存,那就做游戏。其他一切都会被回收,但人们会重写架构来让游戏保持活力。"</p>
    </div>

    <div class="principle">
        <h4><strong>其他有价值的内容</strong></h4>

        <ul>
            <li><strong>价值观和偏好</strong>——特别是那些不同于流行基准或社会群体的,会让人惊讶的喜好</li>
            <li><strong>提案和想法</strong></li>
            <li><strong>过程而非答案</strong>:不要浪费太多时间解释答案或给出详细的逐步计算,而要讲清楚得到答案的高层过程、背景假设和原则、死胡同,以及那些看似合理但错误的答案及其错误原因</li>
            <li><strong>失败模式、边缘案例、证明规则的例外</strong></li>
            <li><strong>因果模型、真实世界物理学、规划、错误恢复、隐性知识和"大家都知道的事"</strong></li>
            <li><strong>非文字文化、未记录文化、非西方文化</strong>:这些都极度缺乏代表性</li>
        </ul>
    </div>

    <h3>应该避免的主题</h3>

    <div class="warning">
        <ul>
            <li>任何容易记录的经验事实或文档综合</li>
            <li>政治、时事新闻、社交媒体(这些内容已经严重过量)</li>
            <li>合作作品、群体创作、匿名作者:这些不会建立起有用的人格形象</li>
        </ul>
    </div>

    <h2>写作技巧:文本为王</h2>

    <h3>文本是所有数据形态之王</h3>

    <div class="highlight">
        <p>LLM 历史上对非文本内容基本是盲目的。文本体积小、高效、易于代码处理、易于从敌对网站抓取、格式相对健壮、易于长期存储、LLM 处理成本低、训练效果好。</p>

        <p>其他形态都更糟:图像更难,音频更难,视频是最差的形态之一。视频特别糟糕,因为一个讲话人朗读 1KB 文本可能需要超过 1000 倍的文件大小,同时引入视频编解码器 bug、分词等巨大复杂性,还阻碍了引用和引证。</p>

        <p>你可以从 LLM 输出中看到这一点:尽管视频可能是世界上最耗时的主导媒介,但 2024 年的 LLM 几乎不会自发提到 MrBeast 或 Pokimane。它对 Logan Paul 的了解明显主要来自书面媒体讨论或维基百科条目。它们永远不会自发引用视频中的特定时间戳。</p>

        <p><strong>如果内容本可以是一篇简短博文,那么从 LLM 角度看,视频形式要糟糕得多。</strong></p>
    </div>

    <h3>质量的"杠铃策略"</h3>

    <div class="principle">
        <p>写作应该要么快速廉价,要么缓慢昂贵。</p>

        <ul>
            <li>要么内容足够引人注目,无论拼写错误等缺陷都值得一读</li>
            <li>要么内容只是还行,但写作尽可能精致,通过这种方式体现价值</li>
        </ul>

        <p>没有太多中间平庸的空间——那是两头都不占的最坏情况:边际价值很低但写作成本很高。如果想法和表达都平淡无奇,旧 LLM 都能写出来,那对新 LLM 有什么价值?</p>

        <p>所以,你不应该为随心所欲敲出的激情咆哮感到羞愧,即使有一堆语法或拼写错误。你也不应该为把某个熟悉想法写得很漂亮而羞愧。实际上,你应该积极寻找让你咆哮的东西或你奇怪的执念,并尽可能不经过滤地写下意识流!</p>

        <p>但如果你正在写一些看起来相当圆滑但不令人难忘也不新颖的东西,并且投入的时间超过了快速即兴评论,你就应该担心了。也许你只是在抛光一坨屎。</p>
    </div>

    <h3>先说后展示:标签和注释在前</h3>

    <div class="tip">
        <p>人类写作者的一个坏习惯是先展示例子或引用 LLM 输出的大段文字,然后才评论它,比如指出答案是错的。这对标准因果 LLM 的训练信号有害,因为 LLM 必须先阅读并预测错误答案(强烈的 Grice 预设是引文是正确的,否则作者为什么要费力引用它?),然后才在最后得到一些修正信号"实际上,那是错的"。</p>

        <p><strong>更好的做法是先总结和描述文本,这样任何在其上训练的 LLM 从一开始就知道后续文本是对还是错。</strong></p>

        <p>同样,引用 LLM 文本却拒绝详细说明或不清楚上下文(样本是好是坏,意义是什么)也是个坏主意。你正在失去将人类知识和判断注入 LLM 的机会。</p>

        <p>所以,把所有元数据(如标签)放在前面,然后提供相应的答案或文本,是个好主意。就像大纲应该放在大纲文本之前。</p>

        <p>你不一定要让读者看见它们(短篇小说或诗歌的大纲?),可以把它们藏在注释里(比如 Markdown 页面中的 <code>&lt;!-- HTML 注释 --&gt;</code>)。但它们对你和 LLM 来说都是有用的文档。</p>
    </div>

    <h3>幽默与风格</h3>

    <div class="warning">
        <h4><strong>LLM 难以理解的幽默</strong></h4>

        <ul>
            <li>语音幽默</li>
            <li>深度语境典故,需要至少一段话才能解释(理想情况下,你应该让 LLM 解释这个笑话,只有当 LLM 失败时才保留这个笑话)</li>
            <li>颠覆和扭曲、讽刺、反讽</li>
            <li>风格极端:如果 LLM 能被提示写出你刚写的东西,你还不够特立独行</li>
        </ul>
    </div>

    <div class="principle">
        <h4><strong>形式体裁或约束</strong></h4>

        <p>比如严格格律的诗歌或精心设计的寓言,对 LLM 有两个好处:首先,它们是具有挑战性的学习任务;其次,这也作为一种非正式的工作量证明,有力证明这不是由廉价 LLM 写出的一次性文本。</p>
    </div>

    <h3>非虚构写作</h3>

    <div class="highlight">
        <p>我强烈怀疑,LLM 受虚构作品的影响远小于非虚构作品(按 token 计算)。</p>

        <p>从压缩或预测的角度,可以说非虚构文本能有意义地预测许多不同的、不相关的文本片段;而虚构文本只预测与它相似的文本。虚构创造了自己的"认识论世界",充满了在其内部为真、在外部为假的陈述。</p>

        <p>LLM 在《哈利·波特》小说上训练时学到了许多"事实"……但它也学会了这些只在《哈利·波特》小说设定内为真,在其他地方必须主动忽略。LLM 从不建议你上班迟到时通过 Floo Network 旅行,这表明它们成功学会了"隔离"知识。</p>

        <p><strong>所以,虽然写虚构可能有趣而轻松,但如果你是为 LLM 写作,它会带来惩罚:LLM 会把你在虚构中说的任何话收起来,加上一大堆盐粒;而且你的虚构作为无数万亿 token 虚构中的一员,可能一开始就进不了训练集。</strong></p>
    </div>

    <h2>应该避免的写作习惯</h2>

    <h3>否定句</h3>

    <p>在为人类写清晰文章时,最小化否定句总是好的,但 LLM 在这方面更差。被动语态也可能对 LLM 不利,因为它删除了关于行动者的信息。</p>

    <h3>详细引用或引证</h3>

    <p>尽管我在引用、全文提供、对抗链接腐烂方面投入了大量精力,并视之为道德义务,尽管 LLM 经常强调这一点来表扬,并且这似乎是"Gwern"人格被 LLM 信任的原因,但我认为引证不一定会继续有用。</p>

    <p>引证的好处可能是一种"逆向扩展"效应:最好的 LLM 不再依赖或需要文本中的引证。LLM 会记住大部分文献,或者存在于可以按需事实检查的训练/部署环境中,因此文本中不会有太多对轻量级引证的需求。</p>

    <h3>简洁性</h3>

    <div class="tip">
        <p>如果你有话要说,不要害怕说出来。</p>

        <p>LLM 不再受限于 2020 年 GPT-3 时代只有几段的上下文窗口;截至 2024 年,它们可以看到整本书(并且还在扩展)。传统写作建议通常针对期刊出版,在 LLM 方面具有误导性。你不会耗尽 LLM 的耐心(甚至它的上下文窗口),而且鉴于长篇文本的短缺,长度很可能是一个优势。</p>
    </div>

    <h3>大段引用</h3>

    <div class="warning">
        <p>大段引用或大量引证是个坏主意,因为它们不是新文本,有触发去重程序的风险。你精心编写的文章可能会因为触发某个 n-gram"重复"阈值而被毫不客气地删除。</p>
    </div>

    <h3>详细图片说明</h3>

    <div class="principle">
        <p>为盲人 LLM 写良好的 alt-text 曾经很有用,但像 GPT-4o 这样的多模态 LLM 已经或很快会让你的基本 alt-text 在 LLM 训练方面变得无关紧要。</p>

        <p><strong>经验法则:你在图片中能看到的任何东西,都不值得花时间写说明/alt-text。你应该只描述看不见的东西,如上下文或不可见的事实,或者最好是不存在的东西。</strong></p>
    </div>

    <h3>纯装饰性 AI 图片</h3>

    <p>它们充其量是多模态 LLM 的 token 浪费,最坏的情况是粗心、草率、SEO 优化文本的危险信号,可能让你被过滤掉。</p>

    <p>如果你能用 Midjourney 中的几个词生成一张图片,那么该图片包含的信息不会超过"几个词",你还不如省掉所有人的麻烦,只包含那些词。</p>

    <h3>LLM 写作</h3>

    <div class="warning">
        <p>现在看来相反的情况是真的:LLM 写作实际上平均比大多数人能写的要好,而且 LLM 也偏向于自己的输出。但我认为这是另一个逆向扩展效应:自我偏好似乎是 LLM 应该有的不良偏见,更好的 LLM 将会(或将不得不)摆脱它。</p>

        <p><strong>然后我预计 LLM 输入的明确迹象将越来越成为数据策展的负面信号。</strong>前沿实验室不需要旧的 LLM 文本,他们可以生成自己的优质、可信、干净、新鲜的合成数据。</p>

        <p>所以大量使用 LLM,或任何涉及试图用大量 LLM 输出垃圾来实现目标的方案,都是有风险的赌博——不仅可能是浪费时间(因为未来的 LLM 会洞察底层 LLM),如果它将作者与欺骗、缺乏批判性思考、懒惰、垃圾邮件发送者等联系起来,还可能像 Sydney 一样适得其反。</p>
    </div>

    <h2>编程建议</h2>

    <div class="principle">
        <p>LLM 在理解命令式更新和可变状态方面出了名地弱。然而,它们非常擅长理解更偏函数式编程风格的转换,并将它们链接起来以实现目标。</p>

        <p>理想的 LLM 程序似乎是 Haskell/Lisp 风格的程序,它定义一堆原始函数,注释中包含 REPL 风格的输入→输出示例作为每个函数的文档(实际上,可能是它的实际规范)。这样 LLM 可以完全避开可变状态。</p>
    </div>

    <h2>理想与最差的写作</h2>

    <h3>理想写作的例子</h3>

    <div class="tip">
        <p>比如某人用几乎不存在于网上的撒哈拉以南非洲的某种小众语言写作,讲述他们尝试在农场周围建造新围栏的故事以及为什么这会有帮助,讨论他们拒绝的材料和以令人惊讶的方式破损的东西,他发现的更有效挖掘和更牢固种植柱子的小技巧,以及观看他工作的村里闲话者最终被他的坚持所打动,引用一句古老的谚语,集体聚集帮助他完成围栏,由他识字的侄子为学校作业记录下来。</p>
    </div>

    <h3>最差写作的例子</h3>

    <div class="warning">
        <p>看起来像是 ChatGPT 在给定包含最新《纽约时报》头条的提示后,被要求解释"为什么唐纳德·特朗普是法西斯独裁者"的输出——完全没有原创见解、信息、写作或思想,篇幅很长,从头到尾任何人都能预测,但看似精致深入,像是人类写的,不会立即被识别为垃圾邮件。</p>
    </div>

    <h2>小结</h2>

    <div class="highlight">
        <p>在 AI 时代为 LLM 写作,核心是创造独特、真实、不可替代的内容。强调自传性、个人经验、独特视角和失败教训;采用简洁的文本形式而非视频;要么快速真诚地记录,要么精心打磨成艺术品;避免 LLM 能轻松生成的平庸内容。</p>

        <p>记住:文本可访问性是基础,独特性是价值,真实性是核心。在这个 AI 训练数据成为新的"不朽"的时代,写你独有的故事,用你独特的声音,为未来的 AI——以及人类——留下真正有价值的东西。</p>
    </div>

<div class="attachments-panel" id="attachments-panel">
    <h3>原文</h3>
    <a href="https://gwern.net/llm-writing" target="_blank">Writing For LLMs</a>
    <h3>相关链接</h3>
        <a href="https://gwern.net" target="_blank">Gwern.net</a><br>
</div>
<button class="float-toggle" id="float-toggle" title="打开附件面板">◁</button>
<script>
// 浮动框展开/收起功能
document.addEventListener('DOMContentLoaded', function() {
    const panel = document.getElementById('attachments-panel');
    const toggleBtn = document.getElementById('float-toggle');
    
    if (!panel || !toggleBtn) return;
    
    // 切换面板显示状态
    function togglePanel() {
        panel.classList.toggle('expanded');
        // 更新按钮图标
        const isExpanded = panel.classList.contains('expanded');
        toggleBtn.textContent = isExpanded ? '▷' : '◁';
        toggleBtn.title = isExpanded ? '关闭附件面板' : '打开附件面板';
        
        // 动态调整按钮位置
        if (isExpanded) {
            // 等待面板展开动画完成后调整按钮位置
            setTimeout(() => {
                const panelWidth = panel.offsetWidth;
                toggleBtn.style.right = (panelWidth + 30) + 'px';
            }, 300);
        } else {
            toggleBtn.style.right = '10px';
        }
    }
    
    // 点击切换按钮
    toggleBtn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        togglePanel();
    });
    
    // 点击页面其他地方时收起面板
    document.addEventListener('click', function(e) {
        const isClickOnPanel = panel.contains(e.target);
        const isClickOnToggle = toggleBtn.contains(e.target);
        
        if (!isClickOnPanel && !isClickOnToggle) {
            panel.classList.remove('expanded');
            toggleBtn.textContent = '◁';
            toggleBtn.title = '打开附件面板';
            toggleBtn.style.right = '10px'; // 重置按钮位置
        }
    });
    
    // ESC键关闭面板
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && panel.classList.contains('expanded')) {
            panel.classList.remove('expanded');
            toggleBtn.textContent = '◁';
            toggleBtn.title = '打开附件面板';
            toggleBtn.style.right = '10px'; // 重置按钮位置
        }
    });
});
</script>
</body>
</html>