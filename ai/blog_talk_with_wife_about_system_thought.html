<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>思维的乐高：从搭建工作蓝图到拼装育儿心得</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
    <style>
        :root {
            --primary-color: #0056b3;
            --secondary-color: #6c757d;
            --background-color: #f8f9fa;
            --text-color: #212529;
            --card-bg-color: #ffffff;
            --border-color: #dee2e6;
            --highlight-bg: #fff3cd;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.9;
            margin: 0;
            font-size: 17px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: var(--card-bg-color);
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }

        header {
            background: #343a40;
            color: #ffffff;
            padding: 4rem 2.5rem;
            text-align: center;
        }
        header h1 {
            font-family: 'Noto Serif SC', serif;
            font-size: 2.8rem;
            font-weight: 700;
            margin: 0;
        }
        header .subtitle {
            font-size: 1.2rem;
            color: #ced4da;
            margin-top: 0.5rem;
        }
        
        .memo {
            background-color: #f4f1ea;
            border: 1px solid #e9e4d9;
            padding: 25px;
            margin: 2.5rem;
            border-radius: 8px;
            font-size: 1em;
            color: #5c5346;
        }
        .memo strong {
            display: block;
            font-family: 'Noto Serif SC', serif;
            font-size: 1.2em;
            margin-bottom: 10px;
            color: #3e3830;
        }
        .memo p { margin: 0; text-indent: 0; }

        /* Interactive Summary Styles */
        .interactive-summary {
            padding: 2.5rem;
            background: #fbfdff;
        }
        .summary-title {
            font-family: 'Noto Serif SC', serif;
            text-align: center;
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 2rem;
        }
        .collapsible {
            background-color: var(--card-bg-color);
            color: var(--text-color);
            cursor: pointer;
            padding: 20px 25px;
            width: 100%;
            border: 1px solid var(--border-color);
            text-align: left;
            outline: none;
            font-size: 1.2rem;
            font-weight: 700;
            margin-top: 15px;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .collapsible:hover, .collapsible.active {
            border-color: var(--primary-color);
            box-shadow: 0 4px 15px rgba(0, 86, 179, 0.1);
            color: var(--primary-color);
        }
        .collapsible .icon {
            font-size: 1.5rem;
            margin-right: 15px;
        }
        .collapsible::after {
            content: '+';
            font-size: 1.8rem;
            font-weight: 300;
            color: var(--primary-color);
            transition: transform 0.3s ease;
        }
        .collapsible.active::after {
            content: '−';
            transform: rotate(180deg);
        }
        .content {
            padding: 0 25px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
            background-color: var(--card-bg-color);
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 8px 8px;
        }
        .content ul { list-style-type: '✓ '; padding-left: 20px; }
        .content li { margin-bottom: 10px; }

        /* Full Article Styles */
        .full-article {
            padding: 1.5rem 2.5rem 3rem 2.5rem;
        }
        .article-title {
            font-family: 'Noto Serif SC', serif;
            text-align: center;
            font-size: 2rem;
            color: var(--text-color);
            margin-top: 2rem;
            margin-bottom: 3rem;
            border-top: 1px solid var(--border-color);
            padding-top: 3rem;
        }
        .section {
            margin-bottom: 3.5rem;
        }
        .section h3 {
            font-family: 'Noto Serif SC', serif;
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
        }
        p { text-indent: 2em; margin-bottom: 1.5em; }
        blockquote {
            background-color: #f1f3f5;
            border-left: 5px solid var(--primary-color);
            margin: 2rem 0;
            padding: 1.5rem;
            font-size: 1.1rem;
            font-style: italic;
            color: #495057;
        }
        .highlight {
            background-color: var(--highlight-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
        }
        .reven-interjection {
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-left: 4px solid var(--secondary-color);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }
        .reven-interjection p { margin: 0; font-size: 1rem; color: #343a40; text-indent: 0;}
        .reven-interjection strong { color: #495057; }
    /* 主容器布局调整 - 移除flex布局以保持原始排版 */

.attachments-panel {
    width: 250px;
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    height: fit-content;
    position: sticky;
    top: 20px;
    flex-shrink: 0;
    z-index: 1000;
    border: 1px solid #e0e0e0;
}
.attachments-panel h3 {
    color: #004085;
    margin-top: 0;
    margin-bottom: 15px;
    text-align: center;
    border-bottom: 2px solid #004085;
    padding-bottom: 10px;
}
.attachment-item {
    background-color: #f8f9fa;
    border: 1px solid #ced4da;
    border-radius: 5px;
    padding: 15px;
    margin-bottom: 15px;
    transition: all 0.3s ease;
}
.attachment-item:hover {
    background-color: #e9ecef;
    border-color: #004085;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
.attachment-item h4 {
    margin: 0 0 8px 0;
    color: #004085;
    font-size: 14px;
}
.attachment-item p {
    margin: 0 0 10px 0;
    font-size: 12px;
    color: #6c757d;
    line-height: 1.4;
}
.download-btn {
    display: inline-block;
    background-color: #28a745;
    color: white;
    text-decoration: none;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: bold;
    transition: background-color 0.3s ease;
    width: 100%;
    text-align: center;
    box-sizing: border-box;
}
.download-btn:hover {
    background-color: #218838;
    text-decoration: none;
    color: white;
}
.download-btn:before {
    content: "▼ ";
    margin-right: 5px;
}

/* 可折叠浮动框样式 */
.attachments-panel {
    position: fixed;
    top: 10px;
    right: 10px;
    width: auto; /* 自适应宽度 */
    min-width: 250px; /* 最小宽度 */
    max-width: calc(100vw - 60px); /* 最大宽度，留出边距 */
    max-height: calc(100vh - 80px); /* 留出更多空间避免滚动条 */
    overflow-y: auto;
    overflow-x: hidden; /* 隐藏横向滚动条 */
    z-index: 9999;
    box-shadow: 0 8px 24px rgba(0,0,0,0.25);
    border: 2px solid #004085;
    transform: translateX(100%); /* 默认完全隐藏 */
    transition: transform 0.3s ease;
    /* 自定义滚动条样式 */
    scrollbar-width: thin;
    scrollbar-color: #004085 #f0f0f0;
}

/* WebKit浏览器滚动条样式 */
.attachments-panel::-webkit-scrollbar {
    width: 6px;
}

.attachments-panel::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 3px;
}

.attachments-panel::-webkit-scrollbar-thumb {
    background: #004085;
    border-radius: 3px;
}

.attachments-panel::-webkit-scrollbar-thumb:hover {
    background: #0056b3;
}

/* 展开时显示 */
.attachments-panel.expanded {
    transform: translateX(0);
}

/* 移除container的margin-right设置，保持原始布局 */

.attachment-item {
    width: 250px;
    margin-right: 0;
    display: block;
    margin-bottom: 12px;
    white-space: nowrap; /* 防止文本换行导致宽度过大 */
}

.attachment-item h4 {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; /* 长文本显示省略号 */
    max-width: 100%;
}

.attachments-panel h3 {
    font-size: 16px;
    margin-bottom: 12px;
    white-space: nowrap; /* 标题不换行 */
}

.attachments-panel a {
    white-space: nowrap; /* 链接文本不换行 */
    overflow: hidden;
    text-overflow: ellipsis;
    display: inline-block;
    max-width: 100%;
}

/* 浮动切换按钮 */
.float-toggle {
    position: fixed;
    top: 10px;
    right: 10px;
    width: 50px;
    height: 50px;
    background: #004085;
    color: white;
    border: none;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    z-index: 10000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.float-toggle:hover {
    background: #0056b3;
    transform: scale(1.1);
}

.float-toggle:active {
    transform: scale(0.95);
}

/* 当面板展开时，按钮位置动态调整 */
.attachments-panel.expanded ~ .float-toggle {
    right: 20px; /* 保持在面板左侧的固定位置 */
    opacity: 0.7; /* 展开时降低透明度，避免遮挡 */
}
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>思维的乐高：从搭建工作蓝图到拼装育儿心得</h1>
            <p class="subtitle">—— Jun的复盘与家庭思考</p>
        </header>

        <div class="memo">
            <strong>整理者（Jun）备注：</strong>
            <p>这篇文字源于我和妻子的一次家庭日常讨论。由一件工作上的小事触发，我们聊到了更深处的话题。我忽然意识到，<strong>将具体做事、学习（我们称之为“局部”）和整体的系统思维（“全局”）相结合，会让学习和工作本身变得更有意义。</strong>更让我欣慰的是，在这次梳理中，我也总结并验证了过去在孩子教育上一些做对了的地方。</p>
        </div>

        <!-- ====================================================== -->
        <!--               INTERACTIVE SUMMARY                    -->
        <!-- ====================================================== -->
        <div class="interactive-summary">
            <h2 class="summary-title">交互式摘要大纲</h2>
            
            <button type="button" class="collapsible"><span class="icon">🤯</span>第一章：输出之苦——当网状思维遭遇线性世界</button>
            <div class="content">
                <ul>
                    <li><strong>核心困境：</strong>大脑对复杂问题已有结论，但输出成PPT或文档时却感觉“一团浆糊”。</li>
                    <li><strong>问题根源：</strong>人脑思考是<span class="highlight">三维网状</span>的，而传统文档是<span class="highlight">一维线性</span>的，这种“降维”过程消耗巨大。</li>
                    <li><strong>替代方案：</strong>放弃低效的口头对话式AI交互，寻求能承载网状思维的视觉化工具。</li>
                </ul>
            </div>

            <button type="button" class="collapsible"><span class="icon">🗺️</span>第二章：概念图——“同步”大脑的真正利器</button>
            <div class="content">
                <ul>
                    <li><strong>工具选择：</strong>采用<span class="highlight">概念图</span>，而非思维导图。概念图是真正的网状结构，适合探索与创造。</li>
                    <li><strong>关键洞察：</strong>图中的“关系”（连线）比“概念”（节点）更重要，它承载了逻辑，是思想的<span class="highlight">“谓词”</span>。</li>
                    <li><strong>最终目的：</strong>通过绘制概念图，将大脑中完整、复杂的思考模型“同步”到外部画布上。</li>
                </ul>
            </div>

            <button type="button" class="collapsible"><span class="icon">🤖</span>第三章：与AI共舞——人机协作的全新范式</button>
            <div class="content">
                 <ul>
                    <li><strong>革命性工作流：</strong>将概念图、历史文档、会议纪要及<span class="highlight">华为IPD模板</span>作为上下文，一次性喂给AI。</li>
                    <li><strong>AI的强大：</strong>即使概念图格式非标，AI也能理解其结构，并生成初步大纲。</li>
                    <li><strong>人的核心价值：</strong>AI无法判断隐性的<span class="highlight">“优先级”</span>。人的关键任务是在大纲上快速校对、决策和调整顺序，为AI注入“价值观”。</li>
                    <li><strong>惊人效率：</strong>从数小时到一小时完成任务，AI承担了80%的繁琐工作，人聚焦于最高价值的环节。</li>
                </ul>
            </div>
            
            <button type="button" class="collapsible"><span class="icon">⚙️</span>第四章：行业反思——从“草台班子”到系统工程</button>
            <div class="content">
                <ul>
                    <li><strong>引入新思维：</strong>引入源自航空航天等领域的<span class="highlight">系统工程（MBSE）</span>，强调将复杂事物作为整体去“平衡”。</li>
                    <li><strong>行业变迁：</strong>互联网野蛮生长的“敏捷/草台班子”时代正在过去，AI将加速这一进程。</li>
                    <li><strong>未来工程师：</strong>当AI负责编码，人的核心价值将转变为<span class="highlight">架构设计</span>和<span class="highlight">系统平衡</span>能力。不是AI不行，而是人的架构能力需要升级。</li>
                    <li><strong>管理与领导力：</strong>系统思维也要求管理者懂得区分<span class="highlight">“管理”</span>（执行）与<span class="highlight">“领导力”</span>（创造），因事用人。</li>
                </ul>
            </div>

            <button type="button" class="collapsible"><span class="icon">🌱</span>第五章：回归教育——如何培养孩子的整体思维</button>
            <div class="content">
                 <ul>
                    <li><strong>教育弊病：</strong>传统学校教育的<span class="highlight">“学科割裂”</span>，让孩子只见树木，不见森林，难以将知识融会贯通。</li>
                    <li><strong>教育模式反思：</strong>PBL等综合性学习模式虽好，但对学习动机要求高。精英教育与公平的国民基础教育目标不同，不可混为一谈。</li>
                    <li><strong>家庭教育的成功验证：</strong>通过让孩子完成一个<span class="highlight">完整的“项目”</span>（全局目标），能有效激发他主动学习零散知识（局部）的内在动力。</li>
                    <li><strong>最终结论：</strong>理想的教育是<span class="highlight">“系统性学习”</span>与<span class="highlight">“整体性实践”</span>的结合，让孩子在全局和局部间自如切换。</li>
                </ul>
            </div>
        </div>

        <!-- ====================================================== -->
        <!--                    FULL ARTICLE                      -->
        <!-- ====================================================== -->
        <div class="full-article">
            <h2 class="article-title">逐章详述：我的完整思索</h2>

            <div class="section" id="chapter1">
                <h3><box-icon name='brain'></box-icon>第一章：输出之苦——当网状思维遭遇线性世界</h3>
                <p>上周我经历了一件让我感触颇深的事。我需要准备一个重要的产品立项评审会，其实脑子里对所有事情都一清二楚了——和很多人聊过，结论、优先级都已经确定。但问题是，当我需要把它输出成一份PPT去汇报、去和团队对齐时，整个过程变得异常痛苦。</p>
                <blockquote>“你明明知道你已经想明白了，整得很清楚了，但是你要输出的时候，就感觉脑子里的东西是一团浆糊。”</blockquote>
                <p>这种感觉，我相信很多人都有过。我们的大脑思考一个复杂问题时，并不是像写文章一样从头到尾线性进行的。它更像一个<span class="highlight">三维、甚至多维的向量空间</span>，各种概念、原因、结果、背景信息错综复杂地交织在一起，形成一张巨大的网。而写文档、做PPT，本质上是把这个立体复杂的网状结构，强行“压扁”成<span class="highlight">一维的线性序列</span>。这个“降维”的过程，极大地消耗了我们的工作记忆负荷，让人苦不堪言。</p>
                 <p>我也曾想过，是否可以直接和AI对话，把我脑子里的想法一点点告诉它？但现阶段这种方式效率太低了。AI的反应不够快，而且它没有表情，你无法从非语言线索中获得反馈，这种沟通体验很差，让人不想继续。因此，我必须找到一个能承载我完整思维的、更高效的工具。</p>
            </div>

            <div class="section" id="chapter2">
                <h3><box-icon name='network-chart' type='solid'></box-icon>第二章：概念图——“同步”大脑的真正利器</h3>
                <p>我最终选择了<strong>概念图 (Concept Map)</strong>。它和我过去常用的思维导图有本质区别。思维导图是“结论先行”的，你必须先有一个中心主题，然后像树一样层层展开。它不适合在信息混杂时，进行创造性的、自下而上的整合与思考。</p>
                <p>概念图则完全不同，它是一个真正的<span class="highlight">网状结构</span>。你可以从任何一个想法开始，随意添加新的概念节点，然后用“连线”将它们联系起来。而这其中，我发现了一个被大多数人忽略的关键点：</p>
                <blockquote>“那个关系（连线）可能比那个概念本身更加重要。因为它带着逻辑关系，带着分类，带着因果……我们说话时，主语和宾语之间的<span class="highlight">谓词</span>，就是建立联系的关键，图上的连线就扮演着这个‘谓词’的角色。”</blockquote>
                <p>比如，“A导致B”，“C属于D”，“E是F的背景”。这些“导致”、“属于”、“是背景”的连线，就是我们语言中的谓词，是整个思维逻辑的核心。通过绘制概念图，我相当于把我大脑中那些无形的、复杂的逻辑关系，全部具象化、显性化了。这感觉就像是，我把我大脑的思考模型，完整地“同步”到了这张图上。</p>
            </div>

            <div class="section" id="chapter3">
                <h3><box-icon name='bot'></box-icon>第三章：与AI共舞——人机协作的全新范式</h3>
                <p>完成了这张庞大的概念图后，革命性的时刻到来了。周五上午，我把我画图的那个工具（它的导出格式并不标准）、连同我之前和同事的所有对话记录、相关文档，再加上一个具体的<span class="highlight">华为IPD产品立项的评审模板</span>，全部作为上下文，一次性丢给了大模型AI。让我惊喜的是，即便格式非标，AI强大的`AI Coding`能力依然理解了图谱里的实体和关系。</p>
                <p>AI几乎完美地生成了回答大纲，但一个关键信息丢失了——<span class="highlight">优先级</span>。因为我在画图时，没有刻意标注哪条分支、哪个任务更重要。AI只能根据我过往文档中词语出现的频率来猜测，但这并不可靠。</p>
                <p>于是，我进入了整个流程中最核心的“人机协作”环节。我没有去修改它生成的长篇文档，而是直接在它输出的<span class="highlight">大纲清单</span>上，逐条确认、修正、调整顺序。这个过程非常快，因为我只需要聚焦于最高价值的决策判断。确认无误后，我把这份修正过的清单发回给AI，下达最终指令：“好了，现在按照这个最终清单，给我生成会前阅读的详细文档和开会的PPT。”</p>
                <p><strong>“啪啪啪啪啪”，它就生成了。我一个字都没改，直接就拿去开会了。</strong> 原本我预留了一整个上午，结果一个小时就全部搞定。AI帮我解决了大约80%的繁琐工作，让我能把全部精力都放在了最前端的思考整理和最后端的决策确认上。这让我想起我一个在北师大的朋友，他前两年就想创业做类似的事，但因为技术和执行方面产品没顺利推出。而现在，大模型的能力让这一切成为了可能。</p>
                 <div class="reven-interjection">
                    <strong>妻子Reven一针见血地指出：</strong><p>“所谓事情优先级其实就是决策能力，优先级就是价值观。为什么那些官二代在官场里更游刃有余，就是他的优先级是跟价值观跟他们是匹配的。”</p>
                    <p>这让我豁然开朗，我修正优先级的过程，本质上就是向AI同步我的“价值观”，让它的产出与我的决策标准对齐。</p>
                </div>
            </div>

            <div class="section" id="chapter4">
                <h3><box-icon name='cuboid' type='solid'></box-icon>第四章：行业反思——从“草台班子”到系统工程</h3>
                <p>这次经历让我不禁思考，这是否预示着软件工程的未来？我最近在研究<span class="highlight">系统工程 (Systems Engineering)</span>，这是一个诞生于NASA、航空航天、汽车制造等复杂硬件领域的学科，现在常用<span class="highlight">MBSE（基于模型的系统工程）</span>的方式来实践。它的核心是：</p>
                <blockquote>“把一个复杂的东西当做一个整体，然后去思考。在中间做很多的平衡(Trade-off)……你就是不断地做平衡。”</blockquote>
                <p>过去几十年的互联网软件开发，是“草台班子”式的，推崇敏捷、快速试错。因为软件试错成本低，在一个混乱生长的阶段，这是最高效的方式。但一旦面对像大型银行系统这样需要高度稳定性和安全性的项目，一开始就必须有整体设计。当AI能以极快的速度完成原型和编码，现在最大的瓶颈，变成了<span class="highlight">代码质量和系统架构</span>。这恰恰是系统工程的用武之地。</p>
                <p>很多老一代程序员，包括我自己，都是从“草台班子”过来的，缺乏这种系统性训练。所以当他们看到AI写的代码质量不高时，会觉得AI不行。但我认为，<strong>不是大模型不行，是你的人不行！</strong>是你的架构能力、分解组合能力有问题。我相信，受过系统工程思维训练的年轻人，与AI配合，能做出远比我们这一代人好得多的东西。</p>
                <p>这种思维同样适用于团队管理。一个好的管理者，需要懂得区分<span class="highlight">“管理”</span>（对于确定性高的执行任务，采用命令、考核的方式）和<span class="highlight">“领导力”</span>（对于需要创新的任务，采用激发、赋能的方式），这本身也是一种系统性的平衡艺术。</p>
            </div>

            <div class="section" id="chapter5">
                <h3><box-icon name='leaf'></box-icon>第五章：回归教育——如何培养孩子的整体思维</h3>
                <p>这一切，最终都回归到了教育。我们该如何培养孩子的思维？现代学校教育最大的问题，就是<span class="highlight">学科割裂</span>。孩子们学习的是一个个孤立的知识点（局部），比如一个数学公式，一个物理定律，但他们很少有机会去理解这些知识点是如何共同协作，去解决一个<span class="highlight">真实世界里的复杂问题（全局）</span>的。</p>
                <p>我曾关注过PBL（项目式学习），它试图融合各学科，但这在中国的大规模推广失败了。原因很简单，它对学生的内在动机要求极高，更适合培养顶尖创新人才，而非普适性的基础教育。我们不能混淆<span class="highlight">英国剑桥式的精英教育</span>和我们国家需要的<span class="highlight">公平的国民基础教育</span>。而且，天赋的出现是随机的，一个清华的朋友，他的孩子可能很普通；一个农村的孩子，可能基因突变就是个天才。所以，一个公平、普惠的教育体系至关重要。</p>
                <p>这让我反思我们的家庭教育。我们鼓励孩子去完成一个他自己感兴趣的“项目”，比如从选木到钻木取火成一堆篝火，或者策划一次出国出游。在这个过程中，他为了达成最终的目标（全局），会主动去学习和实践各种零散的技能（局部）。因为有了一个清晰而有趣的目标牵引，学习本身就不再是负担，而成了一种内在的需求和乐趣。这验证了我们的想法：<span class="highlight">一个有意义的全局目标，是点燃孩子学习热情的最好火种。</span></p>
                <div class="reven-interjection">
                    <strong>妻子Reven的反馈让我很欣慰：</strong><p>“是的，你看咱们儿子（Tiger），他现在已经能自己发现问题，并去尝试解决了。他会提出问题，这本身就很重要。”</p>
                </div>
                <p>最终我得出的结论是，理想的教育，应该是学校的<span class="highlight">系统性、模块化知识学习</span>与家庭/课外的<span class="highlight">整体性、项目化实践</span>的结合。让孩子既能沉下心来打磨每一个具体的知识零件，也能运筹帷幄地将这些零件组装起来，去解决一个完整的问题。只有这样，他们才能真正理解学习的意义，并在未来的世界中游刃有余。</p>
            </div>
        </div>
    </div>

    <script>
        var coll = document.getElementsByClassName("collapsible");
        for (let i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var content = this.nextElementSibling;
                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                } else {
                    content.style.maxHeight = content.scrollHeight + 30 + "px";
                }
            });
        }
    </script>

<div class="attachments-panel" id="attachments-panel">
    <h3>原文</h3>
    <a href="https://laobu.com" target="_blank">源链接</a>
</div>
<button class="float-toggle" id="float-toggle" title="打开附件面板">◁</button>
<script>
// 浮动框展开/收起功能
document.addEventListener('DOMContentLoaded', function() {
    const panel = document.getElementById('attachments-panel');
    const toggleBtn = document.getElementById('float-toggle');
    
    if (!panel || !toggleBtn) return;
    
    // 切换面板显示状态
    function togglePanel() {
        panel.classList.toggle('expanded');
        // 更新按钮图标
        const isExpanded = panel.classList.contains('expanded');
        toggleBtn.textContent = isExpanded ? '▷' : '◁';
        toggleBtn.title = isExpanded ? '关闭附件面板' : '打开附件面板';
        
        // 动态调整按钮位置
        if (isExpanded) {
            // 等待面板展开动画完成后调整按钮位置
            setTimeout(() => {
                const panelWidth = panel.offsetWidth;
                toggleBtn.style.right = (panelWidth + 30) + 'px';
            }, 300);
        } else {
            toggleBtn.style.right = '10px';
        }
    }
    
    // 点击切换按钮
    toggleBtn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        togglePanel();
    });
    
    // 点击页面其他地方时收起面板
    document.addEventListener('click', function(e) {
        const isClickOnPanel = panel.contains(e.target);
        const isClickOnToggle = toggleBtn.contains(e.target);
        
        if (!isClickOnPanel && !isClickOnToggle) {
            panel.classList.remove('expanded');
            toggleBtn.textContent = '◁';
            toggleBtn.title = '打开附件面板';
            toggleBtn.style.right = '10px'; // 重置按钮位置
        }
    });
    
    // ESC键关闭面板
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && panel.classList.contains('expanded')) {
            panel.classList.remove('expanded');
            toggleBtn.textContent = '◁';
            toggleBtn.title = '打开附件面板';
            toggleBtn.style.right = '10px'; // 重置按钮位置
        }
    });
});
</script>
</body>
</html>