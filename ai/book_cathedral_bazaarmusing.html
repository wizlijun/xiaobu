<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>《大教堂与集市》核心摘要</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');

        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #ffffff;
            --text-color: #333;
            --light-gray: #f4f4f4;
            --border-color: #ddd;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --highlight-bg: #e8f4fd;
            --highlight-border: #aed6f1;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            line-height: 1.8;
            margin: 0;
            padding: 0;
            background-color: var(--light-gray);
            color: var(--text-color);
            display: flex;
            justify-content: center;
        }

        .book-summary {
            max-width: 900px;
            width: 100%;
            margin: 2rem auto;
            background-color: var(--background-color);
            border-radius: 12px;
            box-shadow: 0 10px 30px var(--shadow-color);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 2.5rem 2rem;
            text-align: center;
            border-bottom: 5px solid var(--secondary-color);
        }

        header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
            letter-spacing: 1px;
        }

        header p {
            margin: 0.5rem 0 0;
            font-size: 1.2rem;
            font-weight: 300;
            opacity: 0.9;
        }

        .intro, .dev-way {
            padding: 2rem;
            background-color: var(--light-gray);
            border-bottom: 1px solid var(--border-color);
        }

        .intro h2, .dev-way h2 {
            margin-top: 0;
            color: var(--primary-color);
            font-size: 1.8rem;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
            display: inline-block;
        }

        .highlight {
            background-color: var(--highlight-bg);
            border-left: 4px solid var(--highlight-border);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 6px;
            font-style: italic;
        }
        
        .highlight strong {
            color: var(--primary-color);
            font-style: normal;
        }

        .accordion-item button {
            background-color: var(--background-color);
            color: var(--text-color);
            cursor: pointer;
            padding: 1.5rem 2rem;
            width: 100%;
            text-align: left;
            border: none;
            border-top: 1px solid var(--border-color);
            outline: none;
            transition: background-color 0.3s ease;
            font-size: 1.3rem;
            font-weight: 500;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .accordion-item:first-child button {
            border-top: none;
        }

        .accordion-item button:hover, .accordion-item button.active {
            background-color: var(--light-gray);
        }

        .accordion-item button .icon {
            font-size: 1.5rem;
            font-weight: bold;
            transition: transform 0.3s ease;
        }
        
        .accordion-item button.active .icon {
            transform: rotate(45deg);
        }

        .panel {
            padding: 0 2rem;
            background-color: white;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
        }
        
        .panel-content {
            padding: 1.5rem 0;
        }

        ul {
            list-style-type: none;
            padding-left: 0;
        }

        li {
            background: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%232ecc71" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>') no-repeat left center;
            padding-left: 2.5rem;
            margin-bottom: 1.2rem;
            background-size: 1.5rem;
        }

        .dev-way ul li {
            background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%233498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>');
        }
        
        .dev-way p {
            font-size: 1.1rem;
            font-style: italic;
            text-align: center;
            opacity: 0.8;
        }

    /* 主容器布局调整 - 移除flex布局以保持原始排版 */

.attachments-panel {
    width: 250px;
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    height: fit-content;
    position: sticky;
    top: 20px;
    flex-shrink: 0;
    z-index: 1000;
    border: 1px solid #e0e0e0;
}
.attachments-panel h3 {
    color: #004085;
    margin-top: 0;
    margin-bottom: 15px;
    text-align: center;
    border-bottom: 2px solid #004085;
    padding-bottom: 10px;
}
.attachment-item {
    background-color: #f8f9fa;
    border: 1px solid #ced4da;
    border-radius: 5px;
    padding: 15px;
    margin-bottom: 15px;
    transition: all 0.3s ease;
}
.attachment-item:hover {
    background-color: #e9ecef;
    border-color: #004085;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
.attachment-item h4 {
    margin: 0 0 8px 0;
    color: #004085;
    font-size: 14px;
}
.attachment-item p {
    margin: 0 0 10px 0;
    font-size: 12px;
    color: #6c757d;
    line-height: 1.4;
}
.download-btn {
    display: inline-block;
    background-color: #28a745;
    color: white;
    text-decoration: none;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: bold;
    transition: background-color 0.3s ease;
    width: 100%;
    text-align: center;
    box-sizing: border-box;
}
.download-btn:hover {
    background-color: #218838;
    text-decoration: none;
    color: white;
}
.download-btn:before {
    content: "▼ ";
    margin-right: 5px;
}

/* 可折叠浮动框样式 */
.attachments-panel {
    position: fixed;
    top: 10px;
    right: 10px;
    width: auto; /* 自适应宽度 */
    min-width: 250px; /* 最小宽度 */
    max-width: calc(100vw - 60px); /* 最大宽度，留出边距 */
    max-height: calc(100vh - 80px); /* 留出更多空间避免滚动条 */
    overflow-y: auto;
    overflow-x: hidden; /* 隐藏横向滚动条 */
    z-index: 9999;
    box-shadow: 0 8px 24px rgba(0,0,0,0.25);
    border: 2px solid #004085;
    transform: translateX(100%); /* 默认完全隐藏 */
    transition: transform 0.3s ease;
    /* 自定义滚动条样式 */
    scrollbar-width: thin;
    scrollbar-color: #004085 #f0f0f0;
}

/* WebKit浏览器滚动条样式 */
.attachments-panel::-webkit-scrollbar {
    width: 6px;
}

.attachments-panel::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 3px;
}

.attachments-panel::-webkit-scrollbar-thumb {
    background: #004085;
    border-radius: 3px;
}

.attachments-panel::-webkit-scrollbar-thumb:hover {
    background: #0056b3;
}

/* 展开时显示 */
.attachments-panel.expanded {
    transform: translateX(0);
}

/* 移除container的margin-right设置，保持原始布局 */

.attachment-item {
    width: 250px;
    margin-right: 0;
    display: block;
    margin-bottom: 12px;
    white-space: nowrap; /* 防止文本换行导致宽度过大 */
}

.attachment-item h4 {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; /* 长文本显示省略号 */
    max-width: 100%;
}

.attachments-panel h3 {
    font-size: 16px;
    margin-bottom: 12px;
    white-space: nowrap; /* 标题不换行 */
}

.attachments-panel a {
    white-space: nowrap; /* 链接文本不换行 */
    overflow: hidden;
    text-overflow: ellipsis;
    display: inline-block;
    max-width: 100%;
}

/* 浮动切换按钮 */
.float-toggle {
    position: fixed;
    top: 10px;
    right: 10px;
    width: 50px;
    height: 50px;
    background: #004085;
    color: white;
    border: none;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    z-index: 10000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.float-toggle:hover {
    background: #0056b3;
    transform: scale(1.1);
}

.float-toggle:active {
    transform: scale(0.95);
}

/* 当面板展开时，按钮位置动态调整 */
.attachments-panel.expanded ~ .float-toggle {
    right: 20px; /* 保持在面板左侧的固定位置 */
    opacity: 0.7; /* 展开时降低透明度，避免遮挡 */
}
    </style>
</head>
<body>

    <div class="book-summary">
        <header>
            <h1>大教堂与集市</h1>
            <p>Eric S. Raymond | 关于Linux及开源的沉思录</p>
        </header>

        <section class="intro">
            <h2>核心隐喻</h2>
            <p>本书的核心在于对比两种截然不同的软件开发模式：</p>
            <div class="highlight">
                <strong>大教堂 (The Cathedral):</strong> 一种传统的、自上而下的、封闭式的开发模式。项目由少数精英开发者在与世隔绝的环境中精心构建，只有在最终完成时才发布。如同建造一座宏伟的大教堂，一切都遵循着预设的蓝图。
            </div>
            <div class="highlight">
                <strong>集市 (The Bazaar):</strong> 一种开放的、去中心化的、看似混乱的开发模式。代码在互联网上公开，任何人都可以参与贡献、测试和改进。项目像一个喧闹的集市，在无数人的共同参与下，自发地演化出一个稳定而强大的系统。Linux内核的开发就是其典范。
            </div>
        </section>
        
        <div class="accordion">
            <div class="accordion-item">
                <button>
                    <span>第一章：黑客简史</span>
                    <span class="icon">+</span>
                </button>
                <div class="panel">
                    <div class="panel-content">
                        <p>本章追溯了黑客文化的演变，为理解开源现象提供了历史背景。</p>
                        <ul>
                            <li><strong>“真正的程序员”时代:</strong> 早期计算机的先驱，他们直接与硬件打交道，追求极致的效率和技巧。</li>
                            <li><strong>MIT人工智能实验室:</strong> 现代黑客文化的发源地，形成了崇尚共享、开放和技术挑战的早期社区。</li>
                            <li><strong>ARPAnet的诞生:</strong> 将孤立的黑客群体连接成一个“网络部落”，促进了文化、行话和协作精神的形成。</li>
                            <li><strong>Unix的兴起:</strong> Ken Thompson和Dennis Ritchie创造的Unix操作系统，以其简洁、可移植和工具化的哲学，成为黑客文化新的载体。</li>
                            <li><strong>GNU项目与自由软件:</strong> Richard Stallman (RMS) 发起GNU项目，旨在创建一个完全自由的Unix兼容系统，并提出了GPL许可证，奠定了自由软件运动的基石。</li>
                            <li><strong>Linux的横空出世:</strong> Linus Torvalds基于“集市”模式开发的Linux内核，最终与GNU工具结合，成为开源革命的引爆点。</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <button>
                    <span>第二章：大教堂与集市</span>
                    <span class="icon">+</span>
                </button>
                <div class="panel">
                    <div class="panel-content">
                        <p>本章是全书的核心，通过作者开发`fetchmail`的亲身经历，系统阐述了“集市”模式的原则和优势。</p>
                        <div class="highlight">
                           <strong>观点:</strong> Linux的成功颠覆了传统软件工程的认知。作者将自己原先信奉的“大教堂”模式与Linux所代表的“集市”模式进行对比，并有意识地在`fetchmail`项目中实践“集市”模式，验证其有效性。
                        </div>
                        <ul>
                            <li><strong>原则 1: 好的软件源于开发者切身的痛点。</strong> (Every good work of software starts by scratching a developer's personal itch.)</li>
                            <li><strong>原则 2: 优秀的程序员懂得复用与重构，而非从零开始。</strong> (Good programmers know what to write. Great ones know what to rewrite (and reuse).)</li>
                            <li><strong>原则 3: 准备好抛弃你的第一个版本，你总会这么做的。</strong> (Plan to throw one away; you will, anyhow.)</li>
                            <li><strong>原则 7: 早发布，勤发布，并倾听用户的声音。</strong> (Release early. Release often. And listen to your customers.) 这是集市模式的核心实践。</li>
                            <li><strong>原则 8: Linus定律：“只要有足够多的眼球，所有Bug都将无处遁形。”</strong> ("Given enough eyeballs, all bugs are shallow.") 这是对并行调试和同行评审力量的最佳诠释。</li>
                            <li><strong>原则 10: 将你的用户（测试者）视为最宝贵的合作开发者，他们便会成为你最宝贵的资源。</strong> (Treating your users as co-developers is your least-hassle route to rapid code improvement.)</li>
                            <li><strong>原则 11: 认识到用户的好点子，其价值不亚于自己有好点子。有时，前者更佳。</strong> (The next best thing to having good ideas is recognizing good ideas from your users. Sometimes the latter is better.)</li>
                            <li><strong>原则 13: 设计的完美，不是无可增加，而是无可删减。</strong> (Perfection is achieved not when there is nothing more to add, but when there is nothing left to take away.)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <button>
                    <span>第三章：开垦思想圈</span>
                    <span class="icon">+</span>
                </button>
                <div class="panel">
                    <div class="panel-content">
                        <p>本章深入探讨了开源社区的社会动力学、所有权习俗和激励机制。</p>
                        <div class="highlight">
                            <strong>核心观点:</strong> 开源社区是一个“礼物文化” (Gift Culture)，其基本驱动力不是金钱，而是通过“赠与”（贡献代码、文档等）来换取同行的认可和声望 (Reputation)。
                        </div>
                        <ul>
                            <li><strong>软件所有权的洛克理论:</strong> 开源项目的所有权类似于土地所有权，可以通过三种方式获得：
                                <ol>
                                    <li><strong>创建项目 (开垦):</strong> 第一个开创者。</li>
                                    <li><strong>继承项目 (转让):</strong> 由前任所有者移交。</li>
                                    <li><strong>接管被遗弃的项目 (逆向占有):</strong> 在原作者消失后，通过公开宣告并付出努力来获得。</li>
                                </ol>
                            </li>
                            <li><strong>社区禁忌:</strong> 社区存在强大的社会压力来维护稳定和激励机制，主要表现为三大禁忌：
                                <ol>
                                    <li>禁止项目分叉 (Forking)。</li>
                                    <li>禁止发布未经协调的“流氓补丁” (Rogue Patches)。</li>
                                    <li>禁止在未经同意的情况下去掉他人的署名。</li>
                                </ol>
                            </li>
                            <li><strong>谦逊的价值:</strong> 在礼物文化中，自夸和过度自我推销是禁忌。领导者必须表现出谦逊，以吸引更多贡献者并维持项目的健康发展。代码本身就是最好的宣言。</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item">
                <button>
                    <span>第四章：魔法大锅</span>
                    <span class="icon">+</span>
                </button>
                <div class="panel">
                    <div class="panel-content">
                        <p>本章分析了开源现象背后的经济学原理和商业模式。</p>
                        <div class="highlight">
                            <strong>核心观点:</strong> 传统软件行业普遍存在“制造业错觉”，认为软件是产品，其价值在于销售拷贝。事实上，软件本质上是服务，其大部分成本在于维护，价值更多体现在“使用价值”而非“销售价值”。开源模式迫使行业回归服务本质。
                        </div>
                        <ul>
                            <li><strong>反公地悲剧 (The Inverse Commons):</strong> 与传统公地（如牧场）因过度使用而退化不同，开源软件的价值会随着使用者和贡献者的增多而提升。“草被啃食后，反而长得更茂盛。”</li>
                            <li><strong>开源商业模式:</strong>
                                <ul>
                                    <li><strong>领头羊/市场定位 (Loss Leader):</strong> 开放客户端软件，销售服务器软件或服务（如Netscape）。</li>
                                    <li><strong>硬件捆绑 (Widget Frosting):</strong> 硬件厂商开放驱动程序以促进硬件销售。</li>
                                    <li><strong>送出食谱，开家餐厅 (Give away the recipe, open a restaurant):</strong> 开放软件本身，销售与之相关的支持、咨询和服务（如Red Hat）。</li>
                                    <li><strong>配件销售 (Accessorizing):</strong> 销售与开源软件相关的书籍、T恤等周边产品（如O'Reilly）。</li>
                                </ul>
                            </li>
                            <li><strong>何时开放，何时封闭:</strong> 当可靠性、可扩展性至关重要，且软件作为基础设施能产生网络效应时，开放源码是更优选择。对于高度专业化、非关键性且无网络效应的软件，封闭源码可能更合理。</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item">
                <button>
                    <span>第五章：黑客的复仇</span>
                    <span class="icon">+</span>
                </button>
                <div class="panel">
                    <div class="panel-content">
                        <p>本章记录了1998年开源运动进入主流视野的转折点，以及作者作为“意外的革命者”所扮演的角色。</p>
                        <div class="highlight">
                            <strong>事实:</strong> 1998年1月，Netscape公司宣布开源其浏览器源代码，并公开承认受到《大教堂与集市》的启发。这一事件成为开源运动的“惊天第一枪”。
                        </div>
                        <ul>
                            <li><strong>“开源”一词的诞生:</strong> 为了摆脱“自由软件”一词在商业世界中造成的误解（“免费”与“自由”的混淆）和意识形态色彩，作者与其他人共同创造了“Open Source”这一术语，以更务实、更商业友好的形象进行推广。</li>
                            <li><strong>营销策略:</strong> 开源运动的早期倡导者采取了明确的公关策略：
                                <ul>
                                    <li><strong>自上而下:</strong> 直接影响CEO、CTO等决策者。</li>
                                    <li><strong>聚焦Linux:</strong> 将Linux作为最佳的成功案例进行宣传。</li>
                                    <li><strong>攻占《财富》500强:</strong> 赢得主流商业世界的认可。</li>
                                    <li><strong>影响主流媒体:</strong> 争取《华尔街日报》、《经济学人》等媒体的报道。</li>
                                </ul>
                            </li>
                            <li><strong>“万圣节文件”:</strong> 泄露的微软内部备忘录承认了开源模式的威胁和优势，无意中为开源运动提供了最有力的背书。</li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>

        <section class="dev-way">
            <h2>开发者之道 (The Hacker Way)</h2>
            <p>从本书的哲学中，我们可以提炼出一种独特的思维与行事方式：</p>
            <ul>
                <li>像开发者一样思考。不仅因为你写代码，更因为你将世界视为一个可被理解、改进和重建的系统。</li>
                <li>“开发者之道”始于解决一个让你切身痛苦的问题。从个人之痒开始，创造出对众人有益的解决方案。</li>
                <li>拥抱简洁，胜于追求复杂。做好一件事，并把它做到极致。复用、重构，而非无休止地重新发明。</li>
                <li>自动化枯燥的杂务，解放你的思想去应对真正的挑战。因为无聊和苦差是罪恶。</li>
                <li>当系统崩溃时，不要恐慌——去调试它。每个Bug都是一条线索，每次失败都是一份值得阅读的日志。</li>
                <li>开发者从不等待完美。他们发布、测试、迭代、再发布。他们相信“早发布、勤发布”的力量。</li>
                <li>他们相信众多头脑的力量远胜一人。拥抱同行评审，因为“只要有足够多的眼球，所有Bug都将无处遁形”。</li>
                <li>“开发者之道”的核心不是索取，而是赠与。通过分享你的创造力，你在一个以声望为货币的国度里积累财富。</li>
                <li>它不仅关乎技术，更关乎你如何面对世界：保持好奇、崇尚能力、质疑权威，并拥有创造尚不存在之物的勇气。</li>
            </ul>
        </section>

    </div>

    <script>
        const accordionBtns = document.querySelectorAll(".accordion-item button");

        accordionBtns.forEach(button => {
            button.addEventListener("click", function() {
                const isActive = this.classList.contains("active");

                // Close all panels
                accordionBtns.forEach(btn => {
                    btn.classList.remove("active");
                    btn.nextElementSibling.style.maxHeight = null;
                    btn.querySelector('.icon').textContent = '+';
                    btn.querySelector('.icon').style.transform = 'rotate(0deg)';
                });

                // If the clicked panel was not already active, open it
                if (!isActive) {
                    this.classList.add("active");
                    const panel = this.nextElementSibling;
                    panel.style.maxHeight = panel.scrollHeight + "px";
                    this.querySelector('.icon').textContent = '×';
                    this.querySelector('.icon').style.transform = 'rotate(45deg)';
                }
            });
        });
    </script>


<div class="attachments-panel" id="attachments-panel">
    <h3>原文</h3>
    <a href="book_cathedral_bazaarmusin_files/book.html" target="_blank">源链接</a>
</div>
<button class="float-toggle" id="float-toggle" title="打开附件面板">◁</button>
<script>
// 浮动框展开/收起功能
document.addEventListener('DOMContentLoaded', function() {
    const panel = document.getElementById('attachments-panel');
    const toggleBtn = document.getElementById('float-toggle');
    
    if (!panel || !toggleBtn) return;
    
    // 切换面板显示状态
    function togglePanel() {
        panel.classList.toggle('expanded');
        // 更新按钮图标
        const isExpanded = panel.classList.contains('expanded');
        toggleBtn.textContent = isExpanded ? '▷' : '◁';
        toggleBtn.title = isExpanded ? '关闭附件面板' : '打开附件面板';
        
        // 动态调整按钮位置
        if (isExpanded) {
            // 等待面板展开动画完成后调整按钮位置
            setTimeout(() => {
                const panelWidth = panel.offsetWidth;
                toggleBtn.style.right = (panelWidth + 30) + 'px';
            }, 300);
        } else {
            toggleBtn.style.right = '10px';
        }
    }
    
    // 点击切换按钮
    toggleBtn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        togglePanel();
    });
    
    // 点击页面其他地方时收起面板
    document.addEventListener('click', function(e) {
        const isClickOnPanel = panel.contains(e.target);
        const isClickOnToggle = toggleBtn.contains(e.target);
        
        if (!isClickOnPanel && !isClickOnToggle) {
            panel.classList.remove('expanded');
            toggleBtn.textContent = '◁';
            toggleBtn.title = '打开附件面板';
            toggleBtn.style.right = '10px'; // 重置按钮位置
        }
    });
    
    // ESC键关闭面板
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && panel.classList.contains('expanded')) {
            panel.classList.remove('expanded');
            toggleBtn.textContent = '◁';
            toggleBtn.title = '打开附件面板';
            toggleBtn.style.right = '10px'; // 重置按钮位置
        }
    });
});
</script>
</body>
</html>