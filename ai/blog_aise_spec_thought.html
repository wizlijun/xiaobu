<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spec Engineeringï¼šè½¯ä»¶å·¥ç¨‹çš„æ–°æ ¸å¿ƒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: '#0f172a',
                        accent: '#3b82f6',
                        warning: '#f59e0b',
                        success: '#10b981'
                    }
                }
            }
        }
    </script>
    <style>
        .mermaid { display: flex; justify-content: center; margin: 1.5rem 0; }
        .glass-panel { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(4px); }
        [x-cloak] { display: none !important; }
        
        /* è‡ªå®šä¹‰æ‰“å­—æœºå…‰æ ‡æ•ˆæœ */
        .typing-cursor::after {
            content: '|';
            animation: blink 1s step-start infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }
    /* ä¸»å®¹å™¨å¸ƒå±€è°ƒæ•´ - ç§»é™¤flexå¸ƒå±€ä»¥ä¿æŒåŸå§‹æ’ç‰ˆ */

.attachments-panel {
    width: 250px;
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    height: fit-content;
    position: sticky;
    top: 20px;
    flex-shrink: 0;
    z-index: 1000;
    border: 1px solid #e0e0e0;
}
.attachments-panel h3 {
    color: #004085;
    margin-top: 0;
    margin-bottom: 15px;
    text-align: center;
    border-bottom: 2px solid #004085;
    padding-bottom: 10px;
}
.attachment-item {
    background-color: #f8f9fa;
    border: 1px solid #ced4da;
    border-radius: 5px;
    padding: 15px;
    margin-bottom: 15px;
    transition: all 0.3s ease;
}
.attachment-item:hover {
    background-color: #e9ecef;
    border-color: #004085;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
.attachment-item h4 {
    margin: 0 0 8px 0;
    color: #004085;
    font-size: 14px;
}
.attachment-item p {
    margin: 0 0 10px 0;
    font-size: 12px;
    color: #6c757d;
    line-height: 1.4;
}
.download-btn {
    display: inline-block;
    background-color: #28a745;
    color: white;
    text-decoration: none;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: bold;
    transition: background-color 0.3s ease;
    width: 100%;
    text-align: center;
    box-sizing: border-box;
}
.download-btn:hover {
    background-color: #218838;
    text-decoration: none;
    color: white;
}
.download-btn:before {
    content: "â–¼ ";
    margin-right: 5px;
}

/* å¯æŠ˜å æµ®åŠ¨æ¡†æ ·å¼ */
.attachments-panel {
    position: fixed;
    top: 10px;
    right: 10px;
    width: auto; /* è‡ªé€‚åº”å®½åº¦ */
    min-width: 250px; /* æœ€å°å®½åº¦ */
    max-width: calc(100vw - 60px); /* æœ€å¤§å®½åº¦ï¼Œç•™å‡ºè¾¹è· */
    max-height: calc(100vh - 80px); /* ç•™å‡ºæ›´å¤šç©ºé—´é¿å…æ»šåŠ¨æ¡ */
    overflow-y: auto;
    overflow-x: hidden; /* éšè—æ¨ªå‘æ»šåŠ¨æ¡ */
    z-index: 9999;
    box-shadow: 0 8px 24px rgba(0,0,0,0.25);
    border: 2px solid #004085;
    transform: translateX(100%); /* é»˜è®¤å®Œå…¨éšè— */
    transition: transform 0.3s ease;
    /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */
    scrollbar-width: thin;
    scrollbar-color: #004085 #f0f0f0;
}

/* WebKitæµè§ˆå™¨æ»šåŠ¨æ¡æ ·å¼ */
.attachments-panel::-webkit-scrollbar {
    width: 6px;
}

.attachments-panel::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 3px;
}

.attachments-panel::-webkit-scrollbar-thumb {
    background: #004085;
    border-radius: 3px;
}

.attachments-panel::-webkit-scrollbar-thumb:hover {
    background: #0056b3;
}

/* å±•å¼€æ—¶æ˜¾ç¤º */
.attachments-panel.expanded {
    transform: translateX(0);
}

/* ç§»é™¤containerçš„margin-rightè®¾ç½®ï¼Œä¿æŒåŸå§‹å¸ƒå±€ */

.attachment-item {
    width: 250px;
    margin-right: 0;
    display: block;
    margin-bottom: 12px;
    white-space: nowrap; /* é˜²æ­¢æ–‡æœ¬æ¢è¡Œå¯¼è‡´å®½åº¦è¿‡å¤§ */
}

.attachment-item h4 {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; /* é•¿æ–‡æœ¬æ˜¾ç¤ºçœç•¥å· */
    max-width: 100%;
}

.attachments-panel h3 {
    font-size: 16px;
    margin-bottom: 12px;
    white-space: nowrap; /* æ ‡é¢˜ä¸æ¢è¡Œ */
}

.attachments-panel a {
    white-space: nowrap; /* é“¾æ¥æ–‡æœ¬ä¸æ¢è¡Œ */
    overflow: hidden;
    text-overflow: ellipsis;
    display: inline-block;
    max-width: 100%;
}

/* æµ®åŠ¨åˆ‡æ¢æŒ‰é’® */
.float-toggle {
    position: fixed;
    top: 10px;
    right: 10px;
    width: 50px;
    height: 50px;
    background: #004085;
    color: white;
    border: none;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    z-index: 10000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.float-toggle:hover {
    background: #0056b3;
    transform: scale(1.1);
}

.float-toggle:active {
    transform: scale(0.95);
}

/* å½“é¢æ¿å±•å¼€æ—¶ï¼ŒæŒ‰é’®ä½ç½®åŠ¨æ€è°ƒæ•´ */
.attachments-panel.expanded ~ .float-toggle {
    right: 20px; /* ä¿æŒåœ¨é¢æ¿å·¦ä¾§çš„å›ºå®šä½ç½® */
    opacity: 0.7; /* å±•å¼€æ—¶é™ä½é€æ˜åº¦ï¼Œé¿å…é®æŒ¡ */
}
    </style>
</head>
<body class="bg-slate-100 text-slate-800 font-sans h-screen flex flex-col overflow-hidden" x-data="appData()">

    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="bg-brand text-white shadow-lg shrink-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl font-bold flex items-center gap-2 tracking-wide">
                <span class="text-accent">OpenSpec</span> æ·±åº¦è§£ææŠ¥å‘Š
            </h1>
            <nav class="flex gap-1 bg-slate-800/50 p-1 rounded-lg">
                <button @click="switchTab('dashboard')" :class="tabClass('dashboard')" class="px-4 py-2 rounded-md text-sm transition-all duration-300">æ€»è§ˆ</button>
                <button @click="switchTab('chat')" :class="tabClass('chat')" class="px-4 py-2 rounded-md text-sm transition-all duration-300">å›¢é˜Ÿç ”è®¨</button>
                <button @click="switchTab('knowledge')" :class="tabClass('knowledge')" class="px-4 py-2 rounded-md text-sm transition-all duration-300">OpenSpec ä½“ç³»</button>
                <button @click="switchTab('insight')" :class="tabClass('insight')" class="px-4 py-2 rounded-md text-sm font-bold flex items-center gap-2 transition-all duration-300 ring-2 ring-accent ring-opacity-50">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                    æ·±åº¦æ´å¯Ÿ
                </button>
            </nav>
        </div>
    </header>

    <!-- ä¸»æ»šåŠ¨åŒºåŸŸ -->
    <main class="flex-1 overflow-y-auto relative scroll-smooth">
        <div class="container mx-auto p-6 min-h-full pb-20">

            <!-- TAB 1: ä»ªè¡¨ç›˜ (ä¿æŒåŸæ ·ï¼Œç®€åŒ–å±•ç¤º) -->
            <div x-show="currentTab === 'dashboard'" x-transition.opacity class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-blue-500">
                    <h2 class="text-xl font-bold mb-4">å½“å‰è½¯ä»¶å·¥ç¨‹çš„ç—›ç‚¹</h2>
                    <ul class="space-y-3 text-slate-600">
                        <li class="flex items-start gap-2">
                            <span class="text-red-500 mt-1">âœ•</span>
                            <span><strong>æ¨¡ç³Šæ€§ (Ambiguity)ï¼š</strong> äººç±»ä¹ æƒ¯è„‘è¡¥éœ€æ±‚ï¼Œä½† AI åªèƒ½åŸºäºæ¦‚ç‡é¢„æµ‹ã€‚Spec ä¸å‡†ï¼ŒAI å¿…é”™ã€‚</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-red-500 mt-1">âœ•</span>
                            <span><strong>ä¸Šä¸‹æ–‡ä¸¢å¤±ï¼š</strong> éœ€æ±‚åœ¨ PM -> æ¶æ„å¸ˆ -> å¼€å‘è€… -> ä»£ç  çš„ä¼ é€’ä¸­é€å±‚å¤±çœŸã€‚</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-red-500 mt-1">âœ•</span>
                            <span><strong>ç»´æŠ¤æˆæœ¬ï¼š</strong> ä»£ç æ”¹äº†ï¼Œæ–‡æ¡£æ²¡æ”¹ã€‚ä¸‹æ¬¡ AI è¯»å–æ–‡æ¡£æ—¶ï¼Œå¾—åˆ°çš„æ˜¯è¿‡æ—¶ä¿¡æ¯ã€‚</span>
                        </li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-green-500">
                    <h2 class="text-xl font-bold mb-4">Spec Engineering çš„ä»·å€¼</h2>
                    <div class="mermaid">
                        graph LR
                        A[æ¨¡ç³Šæ„å›¾] -->|Specå·¥ç¨‹åŒ–| B(ç»“æ„åŒ–å¥‘çº¦)
                        B -->|é©±åŠ¨| C[Human Dev]
                        B -->|é©±åŠ¨| D[AI Agent]
                        C --> E[é«˜è´¨é‡è½¯ä»¶]
                        D --> E
                        B -->|è‡ªåŠ¨ç”Ÿæˆ| F[æµ‹è¯•ç”¨ä¾‹]
                    </div>
                </div>
            </div>

            <!-- TAB 2: å›¢é˜Ÿç ”è®¨ (ç®€åŒ–ç‰ˆ) -->
            <div x-show="currentTab === 'chat'" class="max-w-4xl mx-auto">
                <div class="space-y-4">
                     <!-- ä»…å±•ç¤ºæ ¸å¿ƒå¼•è¨€ -->
                     <div class="bg-indigo-50 p-4 rounded-lg border-l-4 border-indigo-500">
                        <div class="font-bold text-indigo-900 mb-1">Spy (å…³é”®æ´å¯Ÿ)</div>
                        <p class="text-indigo-800">"å¦‚æœæ˜¯æ¶æ„çš„å…³é”®æ–‡æ¡£ï¼Œä½ å°±å»ºä¸€ä¸ª Agents/ ç›®å½•... è¿™æ ·æ¸è¿›å¼åŠ è½½ï¼Œä¼šèŠ‚çœä¸å°‘ tokenã€‚"</p>
                        <div class="mt-2 text-xs text-indigo-600 font-mono">>> è§£æï¼šSpec æ˜¯ AI çš„å¤–æŒ‚æ˜¾å­˜ï¼Œç®¡ç† Spec å°±æ˜¯ç®¡ç† AI çš„è®¤çŸ¥è¾¹ç•Œã€‚</div>
                    </div>
                    <div class="bg-emerald-50 p-4 rounded-lg border-l-4 border-emerald-500">
                        <div class="font-bold text-emerald-900 mb-1">Jun (å…³é”®æ´å¯Ÿ)</div>
                        <p class="text-emerald-800">"ç»“æ„åŒ–æ‹†è§£ç®¡ç†specä»å¤´åˆ°å°¾çš„è¿‡ç¨‹ï¼Œpmå®é™…ä¸Šå‚ä¸å¾ˆå°‘... å¤§å‘ä¹Ÿåœ¨è¿™ã€‚"</p>
                        <div class="mt-2 text-xs text-emerald-600 font-mono">>> è§£æï¼šSpec èƒ½åŠ›çš„ç¼ºå¤±æ˜¯äº§å“ä¸å·¥ç¨‹è„±èŠ‚çš„æ ¹æœ¬åŸå› ã€‚</div>
                    </div>
                </div>
            </div>

            <!-- TAB 3: çŸ¥è¯†ä½“ç³» (OpenSpec) -->
            <div x-show="currentTab === 'knowledge'" class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-1 bg-white p-5 rounded shadow">
                    <h3 class="font-bold mb-3 border-b pb-2">Artifact å±‚æ¬¡</h3>
                    <ul class="text-sm space-y-4">
                        <li>
                            <div class="font-bold text-blue-600">1. Proposal (Why)</div>
                            <div class="text-slate-500 text-xs">æˆ˜ç•¥æ„å›¾ï¼Œä¸å¯é€†å†³ç­–</div>
                        </li>
                        <li>
                            <div class="font-bold text-green-600">2. Specs (What)</div>
                            <div class="text-slate-500 text-xs">ç³»ç»Ÿè¡Œä¸ºï¼ŒéªŒæ”¶æ ‡å‡† (SHALL/MUST)</div>
                        </li>
                        <li>
                            <div class="font-bold text-amber-600">3. Design (How)</div>
                            <div class="text-slate-500 text-xs">æŠ€æœ¯å®ç°ï¼Œæ¶æ„æƒè¡¡</div>
                        </li>
                    </ul>
                </div>
                <div class="lg:col-span-2 bg-white p-5 rounded shadow">
                    <h3 class="font-bold mb-3">Spec ç¤ºä¾‹ï¼šAI å¯è¯»æ€§å¯¹æ¯”</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-red-50 p-3 rounded">
                            <div class="text-red-800 font-bold text-xs mb-1">âŒ ä¼ ç»Ÿæ–‡æ¡£ (ç»™äººç±»çœ‹)</div>
                            <p class="text-xs text-slate-600">"ç”¨æˆ·ç™»å½•ååº”è¯¥èƒ½çœ‹åˆ°ä»ªè¡¨ç›˜ï¼Œå¦‚æœæ²¡æƒé™å°±æç¤ºä¸€ä¸‹ã€‚"</p>
                            <div class="mt-2 text-red-500 text-[10px]">AI å›°æƒ‘ï¼šå…·ä½“çš„ URL æ˜¯ä»€ä¹ˆï¼Ÿæ²¡æƒé™è¿”å› 401 è¿˜æ˜¯ 403ï¼Ÿæç¤ºæ˜¯ Toast è¿˜æ˜¯ Alertï¼Ÿ</div>
                        </div>
                        <div class="bg-green-50 p-3 rounded">
                            <div class="text-green-800 font-bold text-xs mb-1">âœ… OpenSpec (ç»™ Agent çœ‹)</div>
                            <pre class="text-[10px] text-slate-700 whitespace-pre-wrap">
Scenario: ç”¨æˆ·ç™»å½•é‡å®šå‘
- WHEN: User logs in successfully
- THEN: System SHALL redirect to `/dashboard`

Scenario: æƒé™ä¸è¶³å¤„ç†
- WHEN: User lacks `view_dashboard` permission
- THEN: System SHALL return HTTP 403
- AND: System SHALL display error toast "Access Denied"</pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 4: æ·±åº¦æ´å¯Ÿ (å…¨æ–°æ¨¡å—) -->
            <div x-show="currentTab === 'insight'" x-transition class="space-y-8 pb-12">
                
                <!-- 1. æ ¸å¿ƒè®ºç‚¹ Banner -->
                <div class="bg-gradient-to-r from-slate-900 to-slate-800 text-white p-8 rounded-2xl shadow-2xl relative overflow-hidden">
                    <div class="relative z-10 max-w-3xl">
                        <h2 class="text-3xl font-extrabold mb-4">Spec Engineering: æ™ºèƒ½æ—¶ä»£çš„â€œå…ƒç¼–ç¨‹â€</h2>
                        <p class="text-lg text-slate-300 leading-relaxed">
                            åœ¨ AI è¾…åŠ©ç¼–ç¨‹æ—¶ä»£ï¼Œæˆ‘ä»¬ä¸å†ç›´æ¥ç¼–å†™å¾ªç¯å’Œåˆ¤æ–­ï¼Œæˆ‘ä»¬ç¼–å†™<span class="text-accent font-bold">çº¦æŸ (Constraints)</span> å’Œ <span class="text-accent font-bold">æ„å›¾ (Intents)</span>ã€‚
                            <br>Spec çš„è´¨é‡ï¼Œç›´æ¥å†³å®šäº† AI ç”Ÿæˆä»£ç çš„ä¸Šé™ã€‚
                        </p>
                    </div>
                    <div class="absolute right-0 top-0 opacity-10">
                        <svg class="w-64 h-64" fill="currentColor" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                    </div>
                </div>

                <!-- 2. Spec çš„åŒé‡ä½œç”¨æ¨¡å‹ -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- å·¦ä¾§ï¼šè®¤çŸ¥æ¡¥æ¢ -->
                    <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-100">
                        <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                            <span class="bg-blue-100 text-blue-600 py-1 px-3 rounded text-sm">ä½œç”¨ä¸€</span>
                            æ¶ˆé™¤æ­§ä¹‰çš„â€œåˆ†ç•Œçº¿â€
                        </h3>
                        <p class="text-slate-600 mb-4 text-sm">
                            Spec æ˜¯åˆ’åˆ†<strong>â€œä¸šåŠ¡æœŸæœ›â€</strong>ä¸<strong>â€œå·¥ç¨‹å®ç°â€</strong>çš„åˆšæ€§ç•Œé¢ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸€å±‚ï¼Œä¸šåŠ¡çš„æ¨¡ç³Šæ€§ä¼šç›´æ¥æ±¡æŸ“ä»£ç åº“ã€‚
                        </p>
                        <div class="mermaid">
                            graph TD
                            Business[ä¸šåŠ¡: æ¨¡ç³Šã€å¤šå˜] -->|Spec Engineering| Spec[Spec: ç²¾ç¡®ã€é€»è¾‘é—­ç¯]
                            Spec -->|Prompt| AI[AI Agent]
                            Spec -->|Constraint| Human[å·¥ç¨‹å¸ˆ]
                            AI --> Code[ä»£ç å®ç°]
                            Human --> Code
                            style Spec fill:#dbeafe,stroke:#2563eb,stroke-width:2px
                        </div>
                    </div>

                    <!-- å³ä¾§ï¼šVæ¨¡å‹é‡æ„ -->
                    <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-100">
                        <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                            <span class="bg-green-100 text-green-600 py-1 px-3 rounded text-sm">ä½œç”¨äºŒ</span>
                            V-Model çš„æµ‹è¯•åŸºå‡†
                        </h3>
                        <p class="text-slate-600 mb-4 text-sm">
                            Spec ä¸ä»…ä»…æ˜¯ç”Ÿæˆä»£ç çš„ä¾æ®ï¼Œæ›´æ˜¯<strong>ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹</strong>çš„ä¾æ®ã€‚AI å¯ä»¥æ ¹æ® Spec åŒæ—¶å†™å‡º Code å’Œ Testï¼Œå®ç°è‡ªæˆ‘éªŒè¯ã€‚
                        </p>
                        <div class="mermaid">
                            graph TD
                            Spec[Spec æ–‡æ¡£]
                            Spec -->|ç”Ÿæˆ| Code[ä¸šåŠ¡ä»£ç ]
                            Spec -->|ç”Ÿæˆ| Test[æµ‹è¯•ä»£ç ]
                            Code -->|è¿è¡Œ| Runner{CI/CD}
                            Test -->|éªŒè¯| Runner
                            Runner -->|é€šè¿‡| Pass[âœ… äº¤ä»˜]
                            Runner -->|å¤±è´¥| Fail[âŒ ä¿®æ­£Specæˆ–ä»£ç ]
                            style Spec fill:#d1fae5,stroke:#059669,stroke-width:2px
                        </div>
                    </div>
                </div>

                <!-- 3. ä¸ºä»€ä¹ˆ Spec ç®¡ç†å¦‚æ­¤é‡è¦ -->
                <div class="bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden">
                    <div class="p-6 border-b border-slate-100 bg-slate-50">
                        <h3 class="text-xl font-bold text-slate-800">ä¸ºä»€ä¹ˆâ€œå†™å¥½ã€ç®¡å¥½ Specâ€æ˜¯æ ¸å¿ƒèƒ½åŠ›ï¼Ÿ</h3>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x divide-slate-100">
                        
                        <!-- ç»´åº¦ 1 -->
                        <div class="p-6 hover:bg-slate-50 transition">
                            <div class="text-4xl mb-4">ğŸ§ </div>
                            <h4 class="font-bold text-lg mb-2">å¯¹æŠ—è®¤çŸ¥è´Ÿè·</h4>
                            <p class="text-sm text-slate-600 leading-relaxed">
                                ç°ä»£è½¯ä»¶å¤ªå¤æ‚ï¼Œæ²¡äººèƒ½è®°ä½æ‰€æœ‰ç»†èŠ‚ã€‚Spec æ˜¯<strong>å¤–æŒ‚å¤§è„‘</strong>ã€‚
                                <br><br>
                                <span class="bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded text-xs">AIåœºæ™¯</span> AI çš„ Context Window æ˜¯æœ‰é™çš„ã€‚è‰¯å¥½çš„ Spec æ‹†åˆ†ï¼ˆå¦‚ OpenSpec çš„åˆ†å±‚ç»“æ„ï¼‰å…è®¸ AI æŒ‰éœ€åŠ è½½ä¸Šä¸‹æ–‡ï¼Œé¿å…â€œé—å¿˜â€æˆ–â€œå¹»è§‰â€ã€‚
                            </p>
                        </div>

                        <!-- ç»´åº¦ 2 -->
                        <div class="p-6 hover:bg-slate-50 transition">
                            <div class="text-4xl mb-4">âš–ï¸</div>
                            <h4 class="font-bold text-lg mb-2">å•ä¸€çœŸç†æ¥æº (SSOT)</h4>
                            <p class="text-sm text-slate-600 leading-relaxed">
                                ä»£ç ä¼šå˜ï¼Œå£å¤´æ²Ÿé€šä¼šå¿˜ã€‚åªæœ‰ Spec åº”è¯¥æ˜¯<strong>æ³•å¾‹æ¡æ–‡</strong>ã€‚
                                <br><br>
                                <span class="bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded text-xs">AIåœºæ™¯</span> å½“ AI ä¿®æ”¹äº†ä»£ç ä½†æ²¡æ”¹æ–‡æ¡£æ—¶ï¼Œç³»ç»Ÿå°±è…çƒ‚äº†ã€‚å¿…é¡»å¼ºåˆ¶ AI éµå¾ª <code class="bg-slate-200 px-1 rounded">Spec First</code> æµç¨‹ï¼šå…ˆæ”¹ Specï¼Œå†æ”¹ä»£ç ã€‚
                            </p>
                        </div>

                        <!-- ç»´åº¦ 3 -->
                        <div class="p-6 hover:bg-slate-50 transition">
                            <div class="text-4xl mb-4">ğŸ’¬</div>
                            <h4 class="font-bold text-lg mb-2">ä½æˆæœ¬è¯•é”™</h4>
                            <p class="text-sm text-slate-600 leading-relaxed">
                                ä¿®æ”¹ Spec çš„æˆæœ¬æ˜¯ä¿®æ”¹ä»£ç çš„ 1/10ï¼Œæ˜¯ä¿®å¤çº¿ä¸Š Bug çš„ 1/100ã€‚
                                <br><br>
                                <span class="bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded text-xs">AIåœºæ™¯</span> è®© AI å…ˆè¾“å‡º Proposal/Design è¿›è¡Œå®¡æŸ¥ï¼Œè¿™æœ¬è´¨ä¸Šæ˜¯<strong>åœ¨è‡ªç„¶è¯­è¨€å±‚é¢è¿›è¡Œ Debug</strong>ï¼Œæˆæœ¬æä½ã€‚
                            </p>
                        </div>
                    </div>
                </div>

                <!-- 4. å®æˆ˜å»ºè®® -->
                <div class="bg-brand text-slate-300 rounded-xl p-8 shadow-lg">
                    <h3 class="text-white text-2xl font-bold mb-6">è‡´å›¢é˜Ÿï¼šå¦‚ä½•æå‡ Spec èƒ½åŠ›ï¼Ÿ</h3>
                    <div class="space-y-6">
                        <div class="flex gap-4">
                            <div class="text-accent font-bold text-xl">01</div>
                            <div>
                                <h4 class="text-white font-bold text-lg">äº§å“ç»ç†è¦æ‡‚â€œç»“æ„åŒ–è¡¨è¾¾â€</h4>
                                <p class="mt-1">å‘Šåˆ«æ–‡å­¦æ€§çš„â€œç”¨æˆ·æ•…äº‹â€ï¼Œè½¬å‘é€»è¾‘æ€§çš„â€œè¡Œä¸ºå¥‘çº¦â€ã€‚å­¦ä¹  <code class="text-accent">Gherkin</code> (Given/When/Then) è¯­æ³•ï¼Œè¿™æ˜¯äººæœºå…±é€šçš„è¯­è¨€ã€‚</p>
                            </div>
                        </div>
                        <div class="flex gap-4">
                            <div class="text-accent font-bold text-xl">02</div>
                            <div>
                                <h4 class="text-white font-bold text-lg">å·¥ç¨‹å¸ˆè¦æˆä¸ºâ€œSpec å®¡æŸ¥å‘˜â€</h4>
                                <p class="mt-1">ä»¥å‰ Review ä»£ç ï¼Œç°åœ¨ Review Specã€‚å¦‚æœ Spec æ²¡å†™æ¸…æ¥šè¾¹ç•Œæ¡ä»¶ï¼ˆå¦‚ï¼šç©ºå€¼æ€ä¹ˆå¤„ç†ï¼Ÿå¹¶å‘æ€ä¹ˆå¤„ç†ï¼Ÿï¼‰ï¼Œåšå†³ä¸è®© AI å¼€å§‹å†™ä»£ç ã€‚</p>
                            </div>
                        </div>
                        <div class="flex gap-4">
                            <div class="text-accent font-bold text-xl">03</div>
                            <div>
                                <h4 class="text-white font-bold text-lg">å»ºç«‹ Spec çš„ CI/CD</h4>
                                <p class="mt-1">Spec æ–‡æ¡£ä¹Ÿåº”è¯¥çº³å…¥ç‰ˆæœ¬æ§åˆ¶ï¼ˆGitï¼‰ã€‚æ¯ä¸€æ¬¡ Spec çš„å˜æ›´éƒ½åº”è§¦å‘ Reviewã€‚ä¸è¦è®©æ–‡æ¡£æ¸¸ç¦»äºå·¥ç¨‹ä¹‹å¤–ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            mermaid.initialize({ startOnLoad: true, theme: 'neutral', securityLevel: 'loose' });
        });

        function appData() {
            return {
                currentTab: 'insight', // é»˜è®¤æ‰“å¼€æ·±åº¦æ´å¯Ÿ tab
                
                tabClass(tabName) {
                    if (this.currentTab === tabName) {
                        return 'bg-brand text-white shadow-md transform scale-105';
                    }
                    return 'text-slate-300 hover:bg-slate-700 hover:text-white';
                },

                switchTab(tabName) {
                    this.currentTab = tabName;
                    // ç»™ mermaid ä¸€ç‚¹æ—¶é—´é‡æ–°æ¸²æŸ“ï¼ˆå¦‚æœéœ€è¦ï¼‰
                    setTimeout(() => {
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }, 10);
                }
            }
        }
    </script>

<div class="attachments-panel" id="attachments-panel">
    <h3>åŸæ–‡</h3>
    <a href="/ai/book_spec_by_example.html" target="_blank">æºé“¾æ¥</a>
</div>
<button class="float-toggle" id="float-toggle" title="æ‰“å¼€é™„ä»¶é¢æ¿">â—</button>
<script>
// æµ®åŠ¨æ¡†å±•å¼€/æ”¶èµ·åŠŸèƒ½
document.addEventListener('DOMContentLoaded', function() {
    const panel = document.getElementById('attachments-panel');
    const toggleBtn = document.getElementById('float-toggle');
    
    if (!panel || !toggleBtn) return;
    
    // åˆ‡æ¢é¢æ¿æ˜¾ç¤ºçŠ¶æ€
    function togglePanel() {
        panel.classList.toggle('expanded');
        // æ›´æ–°æŒ‰é’®å›¾æ ‡
        const isExpanded = panel.classList.contains('expanded');
        toggleBtn.textContent = isExpanded ? 'â–·' : 'â—';
        toggleBtn.title = isExpanded ? 'å…³é—­é™„ä»¶é¢æ¿' : 'æ‰“å¼€é™„ä»¶é¢æ¿';
        
        // åŠ¨æ€è°ƒæ•´æŒ‰é’®ä½ç½®
        if (isExpanded) {
            // ç­‰å¾…é¢æ¿å±•å¼€åŠ¨ç”»å®Œæˆåè°ƒæ•´æŒ‰é’®ä½ç½®
            setTimeout(() => {
                const panelWidth = panel.offsetWidth;
                toggleBtn.style.right = (panelWidth + 30) + 'px';
            }, 300);
        } else {
            toggleBtn.style.right = '10px';
        }
    }
    
    // ç‚¹å‡»åˆ‡æ¢æŒ‰é’®
    toggleBtn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        togglePanel();
    });
    
    // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹æ—¶æ”¶èµ·é¢æ¿
    document.addEventListener('click', function(e) {
        const isClickOnPanel = panel.contains(e.target);
        const isClickOnToggle = toggleBtn.contains(e.target);
        
        if (!isClickOnPanel && !isClickOnToggle) {
            panel.classList.remove('expanded');
            toggleBtn.textContent = 'â—';
            toggleBtn.title = 'æ‰“å¼€é™„ä»¶é¢æ¿';
            toggleBtn.style.right = '10px'; // é‡ç½®æŒ‰é’®ä½ç½®
        }
    });
    
    // ESCé”®å…³é—­é¢æ¿
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && panel.classList.contains('expanded')) {
            panel.classList.remove('expanded');
            toggleBtn.textContent = 'â—';
            toggleBtn.title = 'æ‰“å¼€é™„ä»¶é¢æ¿';
            toggleBtn.style.right = '10px'; // é‡ç½®æŒ‰é’®ä½ç½®
        }
    });
});
</script>
</body>
</html>